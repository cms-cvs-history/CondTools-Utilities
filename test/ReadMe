cd src/CondTools/Utilities/test
setenv SCRAM_ARCH slc3_ia32_gcc323
eval `scramv1 runtime -csh`

0)step because of current limit 
 sqlplus cms_xiezhen_dev@devdb10/xiezhen123 < clear.sql

1) use buildmapping "dry run" mode to create a mapping file template for the desired class

pool_build_object_relational_mapping -f mapping-template.xml -o EcalPedestals-default.xml -b -d CondFormatsEcalObjects -c oracle://devdb10 -u cms_xiezhen_dev -p xiezhen123 -b

cp EcalPedestals-default.xml EcalPedestals-custom.xml
modify EcalPedestals-custom.xml
   --change to different Mapping version(!)
   --change column names and table names as you wish

2) create offline db schema and some mock data population
sqlplus cms_xiezhen_dev@devdb10/xiezhen123 < offline-ecalpedestals-oracle.sql

3) build the real mapping
pool_build_object_relational_mapping -f EcalPedestals-custom.xml -d CondFormatsEcalObjects -c oracle://devdb10 -u cms_xiezhen_dev -p xiezhen123

--inspect the database to see some POOL tables appeared
--look at dbsetup.xml
--build the pool container with data
pool_setup_database -f dbsetup.xml -d CondFormatsEcalObjects -c oracle://devdb10 -u cms_xiezhen_dev -p xiezhen123

4) register the db host to the POOL catalog. Necessary *only* if the connection string hasn't  been already registered to the catalog. 

FCregisterPFN -p oracle://devdb10 -t POOL_RDBMS

5) In the offline db, build initial iov of the EcalPedestals data from the TIME value in the top level EcalPedestals object table. The command returns the result token of the IOV has been built. -s option takes the classid of of the EcalPedestals object in the dictionary: i.e. from EcalObjects/src/classes_def.xml

setenv POOL_AUTH_USER cms_xiezhen_dev //*only* if use oracle
setenv POOL_AUTH_PASSWORD xiezhen123  //*only* if use oracle
cmscond_build_iov -h                      //to see the help message

cmscond_build_iov -c oracle://devdb10 -t ECALPEDESTALS -n EcalPedestals -s 2F16F0A9-79D5-4881-CE0B-C271DD84A7F1 

6)assign a tag to the iov token built by the previous command and register it to the metadata service
cmscond_build_metadata -h                      //to see the help message

cmscond_build_metadata -c oracle://devdb10 -i "<the output from the previous command>" -t "ecalped_fromonline"

7) get transfered data in offline db from eventsetup. Inspect the content of load_onlineped.txt, see data changes when iov expires.

cmsRun --parameter-set load_onlineped.txt

--success! 
